#!/bin/bash
USERNAME=cda
DB_NAME=cda_master

mariadb -h 127.0.0.1 -u root -v $@  <<EOF
-- delete database
DROP DATABASE IF EXISTS $DB_NAME;

-- create database
CREATE DATABASE IF NOT EXISTS $DB_NAME DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;

-- create USER
DROP USER IF EXISTS '$USERNAME'@'localhost';
CREATE USER '$USERNAME'@'localhost' IDENTIFIED BY '';
GRANT USAGE ON *.* TO '$USERNAME'@'localhost';
GRANT ALL PRIVILEGES ON *.* TO '$USERNAME'@'localhost' WITH GRANT OPTION;

DROP USER IF EXISTS '$USERNAME'@'%';
CREATE USER '$USERNAME'@'%' IDENTIFIED BY '';
GRANT USAGE ON *.* TO '$USERNAME'@'%';
GRANT ALL PRIVILEGES ON *.* TO '$USERNAME'@'%' WITH GRANT OPTION;

FLUSH PRIVILEGES;
EOF
